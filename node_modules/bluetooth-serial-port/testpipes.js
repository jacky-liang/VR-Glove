var BtSerial = require('./lib/bluetooth-serial-port');

var args = process.argv.slice(2);
var bdAddr = args[0];
var channel = args[1];

process.on('uncaughtException', function (error) {
        console.log(error.stack);
            process.exit(1);
});

var btSerial = new BtSerial.BluetoothSerialPort();

function tryConnect() {

        console.log('Connecting...');

            btSerial.connect('00:11:89:06:06:81', 1,
                                     function () {
                                                     console.log('Connected');
                                                                 btSerial.close();
                                                                             setTimeout(tryConnect, 1000);
                                                                                     },
                                                                                             function () {
                                                                                                             console.log('Connect failed');
                                                                                                                         btSerial.close();
                                                                                                                                     setTimeout(tryConnect, 1000);
                                                                                                                                             });

}

tryConnect();

